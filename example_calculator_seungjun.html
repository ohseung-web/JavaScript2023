<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>계산기 연습</title>
    <style>
        *{
            box-sizing: border-box;
        }
        body{
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container{
            display: flex;
            justify-content: center;
            align-items: center;
            width: 400px;
            height: 550px;
            background-color: rgb(31, 88, 120);
        }
        .small_container{
            width: 350px;
            height: 500px;
            margin: 25px;
        }
        .result{
            display: flex;
            justify-content: center;
            align-items: center;
            width: 350px;
            height: 120px;
            margin-bottom: 10px;
            border-radius: 10px;
            background-color: rgb(230, 152, 147);
            font-size: 28px;
            font-weight: 600;
        }
        .main{
            display: flex;
            justify-content: center;
            align-items: center;
            width: 350px;
            height: 370px;
            border-radius: 10px;
            background-color: white;
        }
        .btn_container .btn1,.btn2,.btn3,.btn4,.btn5{
            text-align: center;
            width: 300px;
            height: 60px;
            margin-bottom: 5px;
        }
        .btn_container button{
            border: transparent;
            height: 60px;
            font-size: 20px;
            border-radius: 10px;
            margin: 2px;
        }
        .btn_container .btn1 button{
            width: 140px;
            background-color: rgb(230, 152, 147);
        }
        .btn_container .btn2 button,.btn3 button,.btn4 button,.btn5 button{
            width: 65px;
            background-color: lightgray;
        }
        .btn_container .btn2 button:nth-last-child(1),.btn3 button:nth-last-child(1),.btn4 button:nth-last-child(1),.btn5:nth-last-child(1) button:nth-last-child(1){
            width: 65px;
            background-color: rgb(49, 49, 49);
            color: white;
        }
        .btn_container .btn5 button:nth-child(1){
            width: 140px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="small_container">
            <div class="result">0</div>
            <div class="main">
                <div class="btn_container">
                    <div class="btn1">
                        <button type="button">AC</button>
                        <button type="button">Enter</button>
                    </div>
                    <div class="btn2">
                        <button type="button">7</button>
                        <button type="button">8</button>
                        <button type="button">9</button>
                        <button type="button">+</button>
                    </div>
                    <div class="btn3">
                        <button type="button">4</button>
                        <button type="button">5</button>
                        <button type="button">6</button>
                        <button type="button">-</button>    
                    </div>
                    <div class="btn4">
                        <button type="button">1</button>
                        <button type="button">2</button>
                        <button type="button">3</button>
                        <button type="button">*</button>
                    </div>
                    <div class="btn5">
                        <button type="button">0</button>
                        <button type="button">.</button>
                        <button type="button">/</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let result = document.querySelector(".result");
        let firstValue = null;  
        let nextValue = null;
        let operator = "";
        // 직전에 enter 버튼을 눌렀는지 확인하는 값
        let clickedEnterBefore = false;
        let button_ac = document.querySelector(".btn1 button:nth-child(1)");
        let button_enter = document.querySelector(".btn1 button:nth-child(2)");
        let button_0 = document.querySelector(".btn5 button:nth-child(1)");
        let button_1 = document.querySelector(".btn4 button:nth-child(1)");
        let button_2 = document.querySelector(".btn4 button:nth-child(2)");
        let button_3 = document.querySelector(".btn4 button:nth-child(3)");
        let button_4 = document.querySelector(".btn3 button:nth-child(1)");
        let button_5 = document.querySelector(".btn3 button:nth-child(2)");
        let button_6 = document.querySelector(".btn3 button:nth-child(3)");
        let button_7 = document.querySelector(".btn2 button:nth-child(1)");
        let button_8 = document.querySelector(".btn2 button:nth-child(2)");
        let button_9 = document.querySelector(".btn2 button:nth-child(3)");
        let button_add = document.querySelector(".btn2 button:nth-child(4)");
        let button_sub = document.querySelector(".btn3 button:nth-child(4)");
        let button_mul = document.querySelector(".btn4 button:nth-child(4)");
        let button_div = document.querySelector(".btn5 button:nth-child(3)");


        button_ac.addEventListener("click", () => {
            result.innerHTML = "0";
            firstValue = null;
            nextValue = null;
            operator = "";
        })

        button_0.addEventListener("click", () => {
            if(clickedEnterBefore === true){
                result.innerHTML = "0";
                firstValue = null;
                nextValue = null;
                operator = "";
            }
            else if(operator !== "" && nextValue == null){
                nextValue = 0;
                result.innerHTML = "0";
            }
            else if(result.innerHTML !== "0"){
                result.innerHTML += "0";
            }
            clickedEnterBefore = false;
        })
        button_1.addEventListener("click", () => {
            if(clickedEnterBefore === true){
                result.innerHTML = "1";
                firstValue = null;
                nextValue = null;
                operator = "";
            }
            else if(operator !== "" && nextValue == null){
                nextValue = 0;
                result.innerHTML = "1";
            }
            else if(result.innerHTML === "0"){
                result.innerHTML = "1";
            }
            else{
                result.innerHTML += "1";
            }
            clickedEnterBefore = false;
        })
        button_2.addEventListener("click", () => {
            if(clickedEnterBefore === true){
                result.innerHTML = "2";
                firstValue = null;
                nextValue = null;
                operator = "";
            }
            else if(operator !== "" && nextValue == null){
                nextValue = 0;
                result.innerHTML = "2";
            }
            else if(result.innerHTML === "0"){
                result.innerHTML = "2";
            }
            else{
                result.innerHTML += "2";
            }
            clickedEnterBefore = false;
        })
        button_3.addEventListener("click", () => {
            if(clickedEnterBefore === true){
                result.innerHTML = "3";
                firstValue = null;
                nextValue = null;
                operator = "";
            }
            else if(operator !== "" && nextValue == null){
                nextValue = 0;
                result.innerHTML = "3";
            }
            else if(result.innerHTML === "0"){
                result.innerHTML = "3";
            }
            else{
                result.innerHTML += "3";
            }
            clickedEnterBefore = false;
        })
        button_4.addEventListener("click", () => {
            if(clickedEnterBefore === true){
                result.innerHTML = "4";
                firstValue = null;
                nextValue = null;
                operator = "";
            }
            else if(operator !== "" && nextValue == null){
                nextValue = 0;
                result.innerHTML = "4";
            }
            else if(result.innerHTML === "0"){
                result.innerHTML = "4";
            }
            else{
                result.innerHTML += "4";
            }
            clickedEnterBefore = false;
        })
        button_5.addEventListener("click", () => {
            if(clickedEnterBefore === true){
                result.innerHTML = "5";
                firstValue = null;
                nextValue = null;
                operator = "";
            }
            else if(operator !== "" && nextValue == null){
                nextValue = 0;
                result.innerHTML = "5";
            }
            else if(result.innerHTML === "0"){
                result.innerHTML = "5";
            }
            else{
                result.innerHTML += "5";
            }
            clickedEnterBefore = false;
        })
        button_6.addEventListener("click", () => {
            if(clickedEnterBefore === true){
                result.innerHTML = "6";
                firstValue = null;
                nextValue = null;
                operator = "";
            }
            else if(operator !== "" && nextValue == null){
                nextValue = 0;
                result.innerHTML = "6";
            }
            else if(result.innerHTML === "0"){
                result.innerHTML = "6";
            }
            else{
                result.innerHTML += "6";
            }
            clickedEnterBefore = false;
        })
        button_7.addEventListener("click", () => {
            if(clickedEnterBefore === true){
                result.innerHTML = "7";
                firstValue = null;
                nextValue = null;
                operator = "";
            }
            else if(operator !== "" && nextValue == null){
                nextValue = 0;
                result.innerHTML = "7";
            }
            else if(result.innerHTML === "0"){
                result.innerHTML = "7";
            }
            else{
                result.innerHTML += "7";
            }
            clickedEnterBefore = false;
        })
        button_8.addEventListener("click", () => {
            if(clickedEnterBefore === true){
                result.innerHTML = "8";
                firstValue = null;
                nextValue = null;
                operator = "";
            }
            else if(operator !== "" && nextValue == null){
                nextValue = 0;
                result.innerHTML = "8";
            }
            else if(result.innerHTML === "0"){
                result.innerHTML = "8";
            }
            else{
                result.innerHTML += "8";
            }
            clickedEnterBefore = false;
        })
        button_9.addEventListener("click", () => {
            if(clickedEnterBefore === true){
                result.innerHTML = "9";
                firstValue = null;
                nextValue = null;
                operator = "";
            }
            else if(operator !== "" && nextValue == null){
                nextValue = 0;
                result.innerHTML = "9";
            }
            else if(result.innerHTML === "0"){
                result.innerHTML = "9";
            }
            else{
                result.innerHTML += "9";
            }
            clickedEnterBefore = false;
        })

        button_add.addEventListener("click", () => {
            if(operator === ""){
                firstValue = parseInt(result.innerHTML);
            }
            else if(operator === "+" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue += nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "-" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue -= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "*" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue *= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "/" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue /= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            operator = "+";
            clickedEnterBefore = false;
        })

        button_sub.addEventListener("click", () => {
            if(operator === ""){
                firstValue = parseInt(result.innerHTML);
            }
            else if(operator === "+" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue += nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "-" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue -= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "*" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue *= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "/" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue /= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            operator = "-";
            clickedEnterBefore = false;
        })

        button_mul.addEventListener("click", () => {
            if(operator === ""){
                firstValue = parseInt(result.innerHTML);
            }
            else if(operator === "+" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue += nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "-" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue -= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "*" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue *= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "/" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue /= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            operator = "*";
            clickedEnterBefore = false;
        })

        button_div.addEventListener("click", () => {
            if(operator === ""){
                firstValue = parseInt(result.innerHTML);
            }
            else if(operator === "+" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue += nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "-" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue -= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "*" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue *= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            else if(operator === "/" && nextValue != null){
                nextValue = parseInt(result.innerHTML);
                firstValue /= nextValue;
                result.innerHTML = firstValue;
                nextValue = null;
            }
            operator = "/";
            clickedEnterBefore = false;
        })

        button_enter.addEventListener("click", () => {
            if(operator === ""){
                firstValue = parseInt(result.innerHTML);
            }
            else if(operator === "+" && clickedEnterBefore === true){
                firstValue += nextValue;
                result.innerHTML = firstValue;
            }
            else if(operator === "+" && clickedEnterBefore !== true){
                nextValue = parseInt(result.innerHTML);
                firstValue += nextValue;
                result.innerHTML = firstValue;
            }
            else if(operator === "-" && clickedEnterBefore === true){
                firstValue -= nextValue;
                result.innerHTML = firstValue;
            }
            else if(operator === "-" && clickedEnterBefore !== true){
                nextValue = parseInt(result.innerHTML);
                firstValue -= nextValue;
                result.innerHTML = firstValue;
            }
            else if(operator === "*" && clickedEnterBefore === true){
                firstValue *= nextValue;
                result.innerHTML = firstValue;
            }
            else if(operator === "*" && clickedEnterBefore !== true){
                nextValue = parseInt(result.innerHTML);
                firstValue *= nextValue;
                result.innerHTML = firstValue;
            }
            else if(operator === "/" && clickedEnterBefore === true){
                firstValue /= nextValue;
                result.innerHTML = firstValue;
            }
            else if(operator === "/" && clickedEnterBefore !== true){
                nextValue = parseInt(result.innerHTML);
                firstValue /= nextValue;
                result.innerHTML = firstValue;
            }
            clickedEnterBefore = true;
        })

        // 오류 : enter 버튼을 눌러 나온 값은 연산자를 눌렀을 때 바뀌지 말아야 한다.
        // ex) 100 + 50를 입력하고 enter를 누른 후, 아무 연산자나 눌러도 값이 바뀌어버린다 

    </script>
</body>
</html>